(()=>{"use strict";(()=>{const e=document.querySelector(".settings"),t=document.querySelector(".icon-settings"),n=document.querySelectorAll(".checkbox__input"),o=document.querySelectorAll(".checkbox__label"),a=document.querySelector(".select-group__title-language"),c=document.querySelector(".select-group__title-photo"),r=document.querySelector(".select-group__title-tag"),s=document.querySelector('option[value="ru"]'),i=document.querySelector('option[value="en"]');let l=!1;const u=e=>{o.forEach((t=>{t.textContent=b[e][`elements-${t.htmlFor}`]})),a.textContent=b[e]["change-lang"],c.textContent=b[e]["change-photo"],r.textContent=b[e]["change-theme"],s.textContent=b[e].russian,i.textContent=b[e].english},d=document.querySelector(".quote"),m=document.querySelector(".author"),g=document.querySelector(".qoutes-icon");async function h(e){const t=await fetch(I[e]),n=await t.json(),o=Math.floor(15*Math.random()+1);d.textContent=n[o].text,m.textContent=n[o].author,g.addEventListener("click",(()=>h(e)))}const p=document.querySelector(".weather-icon"),y=document.querySelector(".weather__temperature"),v=document.querySelector(".weather__description"),f=document.querySelector(".weater__wind"),S=document.querySelector(".weather__humidity"),w=document.querySelector(".city");async function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage.getItem("city")?localStorage.getItem("city"):`${$[e].sity}`;p.className="weather-icon owf";const n=`https://api.openweathermap.org/data/2.5/weather?q=${t}&lang=${e}&appid=f793b145b04b72ffdfd775747be4fac1&units=metric`;try{const t=await fetch(n),o=await t.json();p.classList.add(`owf-${o.weather[0].id}`),y.textContent=`${Math.round(o.main.temp)} °C`,v.textContent=`${o.weather[0].description}`,f.textContent=`${$[e].wind}: ${Math.round(o.wind.speed)} ${$[e].wind_units}`,S.textContent=`${$[e].humidity}: ${o.main.humidity} %`}catch{y.textContent="",f.textContent="",S.textContent="",v.textContent=`${$[e].err}`}}window.addEventListener("beforeunload",(function(){localStorage.setItem("city",w.value)})),w.value=localStorage.getItem("city")?localStorage.getItem("city"):"Minsk",window.addEventListener("load",(function(){localStorage.getItem("city")})),w.addEventListener("change",(e=>{L(A,w.value),localStorage.setItem("city",e.target.value)}));const q=document.querySelector(".name"),_=document.querySelector(".greeting__welcome"),E=document.querySelector(".city");function k(e){_.textContent=function(e){const t=(new Date).getHours();return Math.floor(t/6)<1?`${T[e][0]}`:Math.floor(t/6)<2?`${T[e][1]}`:Math.floor(t/6)<3?`${T[e][2]}`:Math.floor(t/6)<4?`${T[e][3]}`:null}(e),setTimeout(k,6e4)}window.addEventListener("beforeunload",(function(){localStorage.setItem("name",q.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(q.value=localStorage.getItem("name"))}));const $={en:{lang:"en",wind:"Wind speed",wind_units:"m/s",humidity:"Humidity",err:"Data loading error",city:"Minsk"},ru:{lang:"ru",wind:"Скорость ветра",wind_units:"м/с",humidity:"Влажность",err:"Ошибка загрузки данных",city:"Минск"}},x={ru:{name:"[Укажите имя]",city:"[Укажите город]"},en:{name:"[Enter name]",city:"[Enter city]"}},b={ru:{"change-lang":"Выбрать язык",russian:"русский",english:"английский","change-photo":"Выбрать ресурс фото","change-theme":"Выбрать тэг для фото",'text-show"':"Показать","elements-date":"дата","elements-time":"время","elements-weather":"погода","elements-greeting":"приветствие","elements-quotes":"цитаты","elements-audio-player":"плеер","elements-todo":"список дел"},en:{"change-lang":"Change language",russian:"russian",english:"english","change-photo":"Change Photo Source","change-theme":"Change Photo Tag",'text-show"':"Show","elements-date":"date","elements-time":"time","elements-weather":"weather","elements-greeting":"greeting","elements-quotes":"quotes","elements-audio-player":"audio","elements-todo":"todo"}},C={ru:"ru-RU",en:"en-US"},I={ru:"./quote-ru.json",en:"./quote-en.json"},M=["ru","en"],T={en:["Good night,","Good morning,","Good afternoon,","Good evening,"],ru:["Доброй ночи,","Доброе утро,","Добрый день,","Добрый вечер,"]},D=document.querySelector(".select-group__select-language"),j=localStorage.getItem("language"),A=j&&M.includes(j)?j:M[1];window.addEventListener("beforeunload",localStorage.setItem("language",D.value)),D.value=j||"en",window.addEventListener("load",(()=>j));const N=document.querySelector(".time"),H=document.querySelector(".date");let O;function X(e){const t=(new Date).toLocaleTimeString();N.textContent=t,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";const t=(new Date).toLocaleDateString(C[e],{weekday:"long",day:"numeric",month:"long"});H.textContent=`${t[0].toUpperCase()}${t.split(" ")[0].slice(1)} ${t.split(" ")[1]} ${t.split(" ")[2][0].toUpperCase()+t.split(" ")[2].slice(1)}`}(e),O=setTimeout(X,1e3)}const G=[{title:"Aqua Caelestis",src:"./Aqua-Caelestis.mp3",duration:"00:58"},{title:"Ennio Morricone",src:"./Ennio-Morricone.mp3",duration:"01:37"},{title:"Summer Wind",src:"./Summer-Wind.mp3",duration:"01:50"}],J=document.querySelector(".icon_play"),U=document.querySelector(".icon_prew-track"),W=document.querySelector(".icon_next-track"),B=document.querySelector(".audio-player__playlist");let P=!0;const Q=new Audio(G[0].src);let z=0;G.forEach((e=>{const t=document.createElement("li"),n=document.createElement("span");t.classList.add("play-item"),n.classList.add("icon_play_track"),t.textContent=e.title,B.append(t),t.append(n)}));const F=document.querySelectorAll(".play-item");function R(){z<G.length-1?z++:z=0,Q.src=G[z].src,P=!0,F.forEach(((e,t)=>{e.classList.remove("item-active"),t===z?e.classList.add("item-active"):e.classList.remove("item-active")})),V()}function K(){z>0?z--:z=G.length-1,Q.src=G[z].src,P=!0,F.forEach(((e,t)=>{e.classList.remove("item-active"),t===z?e.classList.add("item-active"):e.classList.remove("item-active")})),V()}function V(){P?(Q.play(),P=!1,J.classList.add("pause")):(Q.pause(),P=!0,J.classList.remove("pause"))}F.forEach(((e,t)=>{e.addEventListener("click",(()=>{e.classList.remove("item-active"),Q.src=G[t].src,console.log(G.indexOf(G[t])),P=!0,t===G.indexOf(G[t])?e.classList.add("item-active"):e.classList.remove("item-active"),V()}))})),Q.addEventListener("ended",R);const Y=document.querySelector("body"),Z=document.querySelector(".icon-slider_prew"),ee=document.querySelector(".icon-slider_next"),te=document.querySelector(".select-group__select-photo"),ne=document.querySelector(".select-group__select-tag"),oe="c8df835955fdffeba282db75503e8f10",ae="n6xOqe2zu-sbnT-6QBrQ2Lf5dJNIavTvLN_doll6D8E";let ce,re=new Image;async function se(){let e=String(ce).padStart(2,"0"),t=function(){const e=["night","morning","afternoon","evening"],t=(new Date).getHours();return Math.floor(t/6)<1?`${e[0]}`:Math.floor(t/6)<2?`${e[1]}`:Math.floor(t/6)<3?`${e[2]}`:Math.floor(t/6)<4?`${e[3]}`:null}(),n=ne.value;const o=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=${oe}&tags=${n}&extras=url_l&format=json&nojsoncallback=1`,a=`https://api.unsplash.com/photos/random?orientation=landscape&query=${n}&client_id=${ae}`;try{const n=await fetch(o),c=await n.json(),r=await fetch(a),s=await r.json();re.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,"unsplash"===te.value&&(re.src=await s.urls.regular),"flickr"===te.value?re.src=await c.photos.photo[ce].url_l:re.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,re.onload=()=>{Y.style.backgroundImage=`url(${re.src})`}}catch{re.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`}}ce=Math.floor(20*Math.random()+1),Z.addEventListener("click",(function(){ce--,ce<1&&(ce=20),se()})),ee.addEventListener("click",(function(){ce++,ce>20&&(ce=1),se()})),te.addEventListener("change",se),ne.addEventListener("change",se);const ie=document.querySelector("#progress-bar"),le=document.querySelector(".volume-button"),ue=document.querySelector(".volume"),de=document.querySelector(".volume-slider"),me=document.querySelector(".volume-percentage"),ge=document.querySelector(".currentTime"),he=document.querySelector(".durationTime");function pe(){Q.currentTime&&(ie.max=Q.duration,ie.value=Q.currentTime,ge.innerHTML=ye(Math.floor(Q.currentTime)),he.innerHTML=ye(Math.floor(Q.duration)))}function ye(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return isNaN(t)&&(t="00"),isNaN(n)&&(n="00"),`${t}:${String(n).padStart(2,"0")}`}function ve(e){Q.currentTime=e.target.value}function fe(e){const t=window.getComputedStyle(de).width,n=e.offsetX/parseInt(t);Q.volume=n,me.style.width=100*n+"%"}function Se(){Q.muted=!Q.muted;const e="icono-volumeMedium",t="icono-volumeMute";Q.muted?(ue.classList.remove(e),ue.classList.add(t)):(ue.classList.add(e),ue.classList.remove(t))}const we=document.querySelector(".icon-todo"),Le=document.querySelector(".todo"),qe=document.querySelector(".input-group__input"),_e=document.querySelector(".input-group__button"),Ee=document.querySelector(".todo-container");let ke,$e=!1;localStorage.getItem("todo-task")&&(ke=JSON.parse(localStorage.getItem("todo-task")),ke.map((e=>{be(e)})));function xe(){if(""!==qe.value){let e={id:(new Date).getTime(),name:qe.value,isDone:!1};ke.push(e),localStorage.setItem("todo-task",JSON.stringify(ke)),be(e),qe.value=""}}function be(e){const t=document.createElement("li");t.setAttribute("id",e.id);const n=`\n    <div class="checkbox-group">\n    <input type="checkbox" class="checkbox-group__input"\n    ${e.isDone?"checked":""}>\n    <span>${e.name}</span>\n    <span class="icon icon-delete"></span> \n    </div>`;t.innerHTML=n,Ee.appendChild(t)}window.onload=function(){window.addEventListener("load",(()=>setSettingsData(A))),J.addEventListener("click",V),W.addEventListener("click",R),U.addEventListener("click",K),setInterval(pe,500),ie.addEventListener("change",ve),de.addEventListener("click",fe,!1),le.addEventListener("click",Se),X(A),k(A),h(A),se(),L(A),we.addEventListener("click",(()=>{Le.style.transform=$e?"translateX(120%)":"translateX(0%)",$e=!$e})),_e.addEventListener("click",xe),Ee.addEventListener("click",(e=>{(e.target.classList.contains("icon-delete")||e.target.parentElement.classList.contains("icon-delete"))&&function(e){let t=ke.filter((t=>t.id!==parseInt(e,10)));document.getElementById(e).remove(),localStorage.setItem("todo-task",JSON.stringify(t)),ke=t}(e.target.closest("li").id)})),Ee.addEventListener("change",(e=>{!function(e,t){let n=ke.find((t=>t.id===parseInt(e,10)));n.isDone=!n.isDone,n.isDone?(t.setAttribute("checked",""),t.nextElementSibling.classList.add("checked")):(t.removeAttribute("checked"),t.nextElementSibling.classList.remove("checked"))}(e.target.closest("li").id,e.target)})),t.addEventListener("click",(()=>{e.style.transform=l?"translateX(-120%)":"translateX(0)",l=!l})),n.forEach((e=>{e.addEventListener("click",(e=>{const t=document.querySelector(`.${e.target.name}`);e.target.checked?(t.classList.remove("hide"),t.classList.add("show"),localStorage.setItem(e.target.name,"on")):(t.classList.remove("show"),t.classList.add("hide"),localStorage.setItem(e.target.name,"off"))}))})),u(D.value),D.addEventListener("change",(e=>{localStorage.setItem("language",e.target.value),h(e.target.value),k(e.target.value),clearTimeout(O),X(e.target.value),L(e.target.value),u(e.target.value),function(e){q.setAttribute("placeholder",x[e].name),E.setAttribute("placeholder",x[e].city)}(e.target.value)}))}})()})();