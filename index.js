(()=>{"use strict";(()=>{const e=document.querySelector(".settings"),t=document.querySelector(".icon-settings"),n=document.querySelectorAll(".checkbox__input"),o=document.querySelectorAll(".checkbox__label"),a=document.querySelector(".select-group__title-language"),r=document.querySelector(".select-group__title-photo"),c=document.querySelector(".select-group__title-tag"),l=document.querySelector('option[value="ru"]'),s=document.querySelector('option[value="en"]');let i=!1;const u=e=>{o.forEach((t=>{t.textContent=k[e][`elements-${t.htmlFor}`]})),a.textContent=k[e]["change-lang"],r.textContent=k[e]["change-photo"],c.textContent=k[e]["change-theme"],l.textContent=k[e].russian,s.textContent=k[e].english},d=document.querySelector(".quote"),m=document.querySelector(".author"),g=document.querySelector(".qoutes-icon");async function h(e){const t=await fetch(b[e]),n=await t.json(),o=Math.floor(15*Math.random()+1);d.textContent=n[o].text,m.textContent=n[o].author,g.addEventListener("click",(()=>h(e)))}const y=document.querySelector(".weather-icon"),p=document.querySelector(".weather__temperature"),w=document.querySelector(".weather__description"),f=document.querySelector(".weater__wind"),v=document.querySelector(".weather__humidity"),S=document.querySelector(".city");async function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage.getItem("city")?localStorage.getItem("city"):`${x[e].sity}`;y.className="weather-icon owf";const n=`https://api.openweathermap.org/data/2.5/weather?q=${t}&lang=${e}&appid=f793b145b04b72ffdfd775747be4fac1&units=metric`;try{const t=await fetch(n),o=await t.json();y.classList.add(`owf-${o.weather[0].id}`),p.textContent=`${Math.round(o.main.temp)} °C`,w.textContent=`${o.weather[0].description}`,f.textContent=`${x[e].wind}: ${Math.round(o.wind.speed)} ${x[e].wind_units}`,v.textContent=`${x[e].humidity}: ${o.main.humidity} %`}catch{p.textContent="",f.textContent="",v.textContent="",w.textContent=`${x[e].err}`}}window.addEventListener("beforeunload",(function(){localStorage.setItem("city",S.value)})),S.value=localStorage.getItem("city")?localStorage.getItem("city"):"Minsk",window.addEventListener("load",(function(){localStorage.getItem("city")})),S.addEventListener("change",(e=>{q(D,S.value),localStorage.setItem("city",e.target.value)}));const L=document.querySelector(".name"),_=document.querySelector(".greeting__welcome"),$=document.querySelector(".city");function E(e){_.textContent=function(e){const t=(new Date).getHours();return Math.floor(t/6)<1?`${T[e][0]}`:Math.floor(t/6)<2?`${T[e][1]}`:Math.floor(t/6)<3?`${T[e][2]}`:Math.floor(t/6)<4?`${T[e][3]}`:null}(e),setTimeout(E,6e4)}window.addEventListener("beforeunload",(function(){localStorage.setItem("name",L.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(L.value=localStorage.getItem("name"))}));const x={en:{lang:"en",wind:"Wind speed",wind_units:"m/s",humidity:"Humidity",err:"Data loading error",city:"Minsk"},ru:{lang:"ru",wind:"Скорость ветра",wind_units:"м/с",humidity:"Влажность",err:"Ошибка загрузки данных",city:"Минск"}},C={ru:{name:"[Укажите имя]",city:"[Укажите город]"},en:{name:"[Enter name]",city:"[Enter city]"}},k={ru:{"change-lang":"Выбрать язык",russian:"русский",english:"английский","change-photo":"Выбрать ресурс фото","change-theme":"Выбрать тэг для фото",'text-show"':"Показать","elements-date":"дата","elements-time":"время","elements-weather":"погода","elements-greeting":"приветствие","elements-quotes":"цитаты","elements-audio-player":"плеер","elements-todo":"список дел"},en:{"change-lang":"Change language",russian:"russian",english:"english","change-photo":"Change Photo Source","change-theme":"Change Photo Tag",'text-show"':"Show","elements-date":"date","elements-time":"time","elements-weather":"weather","elements-greeting":"greeting","elements-quotes":"quotes","elements-audio-player":"audio","elements-todo":"todo"}},M={ru:"ru-RU",en:"en-US"},b={ru:"./quote-ru.json",en:"./quote-en.json"},I=["ru","en"],T={en:["Good night,","Good morning,","Good afternoon,","Good evening,"],ru:["Доброй ночи,","Доброе утро,","Добрый день,","Добрый вечер,"]},j=document.querySelector(".select-group__select-language"),A=localStorage.getItem("language"),D=A&&I.includes(A)?A:I[1];window.addEventListener("beforeunload",localStorage.setItem("language",j.value)),j.value=A||"en",window.addEventListener("load",(()=>A));const N=document.querySelector(".time"),H=document.querySelector(".date");let G;function U(e){const t=(new Date).toLocaleTimeString();N.textContent=t,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";const t=(new Date).toLocaleDateString(M[e],{weekday:"long",day:"numeric",month:"long"});H.textContent=`${t[0].toUpperCase()}${t.split(" ")[0].slice(1)} ${t.split(" ")[1]} ${t.split(" ")[2][0].toUpperCase()+t.split(" ")[2].slice(1)}`}(e),G=setTimeout(U,1e3)}const F=[{title:"Aqua Caelestis",src:"./Aqua-Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"./River-Flows-In-You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"./Ennio-Morricone.mp3",duration:"01:37"},{title:"Summer Wind",src:"./Summer-Wind.mp3",duration:"01:50"}],R=document.querySelector(".icon_play"),W=document.querySelector(".icon_prew-track"),X=document.querySelector(".icon_next-track"),P=document.querySelector(".audio-player__playlist");let Q=!0;const Y=new Audio(F[0].src);let z=0;F.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,P.append(t)}));const B=document.querySelectorAll(".play-item");function J(){z<F.length-1?z++:z=0,Y.src=F[z].src,Q=!0,K(),console.log(z)}function O(){z>0?z--:z=F.length-1,Y.src=F[z].src,Q=!0,K(),console.log(z)}function K(){B.forEach(((e,t)=>{t===z?e.classList.add("item-active"):e.classList.remove("item-active")})),Q?(Y.play(),Q=!1,R.classList.add("pause")):(Y.pause(),Q=!0,R.classList.remove("pause"))}Y.addEventListener("ended",J);const V=document.querySelector("body"),Z=document.querySelector(".icon-slider_prew"),ee=document.querySelector(".icon-slider_next"),te=document.querySelector(".select-group__select-photo"),ne=document.querySelector(".select-group__select-tag"),oe="c8df835955fdffeba282db75503e8f10",ae="n6xOqe2zu-sbnT-6QBrQ2Lf5dJNIavTvLN_doll6D8E";let re,ce=new Image;async function le(){let e=String(re).padStart(2,"0"),t=function(){const e=["night","morning","afternoon","evening"],t=(new Date).getHours();return Math.floor(t/6)<1?`${e[0]}`:Math.floor(t/6)<2?`${e[1]}`:Math.floor(t/6)<3?`${e[2]}`:Math.floor(t/6)<4?`${e[3]}`:null}(),n=ne.value;const o=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=${oe}&tags=${n}&extras=url_l&format=json&nojsoncallback=1`,a=`https://api.unsplash.com/photos/random?orientation=landscape&query=${n}&client_id=${ae}`;try{const n=await fetch(o),r=await n.json(),c=await fetch(a),l=await c.json();ce.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,"unsplash"===te.value&&(ce.src=await l.urls.regular),"flickr"===te.value&&(ce.src=await r.photos.photo[re].url_l),"github"===te.value&&(ce.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`),ce.onload=()=>{V.style.backgroundImage=`url(${ce.src})`}}catch{ce.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`}}re=Math.floor(20*Math.random()+1),Z.addEventListener("click",(function(){re--,re<1&&(re=20),le()})),ee.addEventListener("click",(function(){re++,re>20&&(re=1),le()})),te.addEventListener("change",le),ne.addEventListener("change",le);const se=document.querySelector("#progress-bar"),ie=document.querySelector(".volume-button"),ue=document.querySelector(".volume"),de=document.querySelector(".volume-slider"),me=document.querySelector(".volume-percentage"),ge=document.querySelector(".currentTime"),he=document.querySelector(".durationTime");function ye(){Y.currentTime&&(se.max=Y.duration,se.value=Y.currentTime,ge.innerHTML=pe(Math.floor(Y.currentTime)),he.innerHTML=pe(Math.floor(Y.duration)))}function pe(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return isNaN(t)&&(t="00"),isNaN(n)&&(n="00"),`${t}:${String(n).padStart(2,"0")}`}function we(e){Y.currentTime=e.target.value}function fe(e){const t=window.getComputedStyle(de).width,n=e.offsetX/parseInt(t);Y.volume=n,me.style.width=100*n+"%"}function ve(){Y.muted=!Y.muted;const e="icono-volumeMedium",t="icono-volumeMute";Y.muted?(ue.classList.remove(e),ue.classList.add(t)):(ue.classList.add(e),ue.classList.remove(t))}window.onload=function(){window.addEventListener("load",(()=>setSettingsData(D))),R.addEventListener("click",K),X.addEventListener("click",J),W.addEventListener("click",O),setInterval(ye,500),se.addEventListener("change",we),de.addEventListener("click",fe,!1),ie.addEventListener("click",ve),U(D),E(D),h(D),le(),q(D),t.addEventListener("click",(()=>{e.style.transform=i?"translateX(-120%)":"translateX(0)",i=!i})),n.forEach((e=>{e.addEventListener("click",(e=>{const t=document.querySelector(`.${e.target.name}`);e.target.checked?(t.classList.remove("hide"),t.classList.add("show"),localStorage.setItem(e.target.name,"on")):(t.classList.remove("show"),t.classList.add("hide"),localStorage.setItem(e.target.name,"off"))}))})),u(j.value),j.addEventListener("change",(e=>{localStorage.setItem("language",e.target.value),h(e.target.value),E(e.target.value),clearTimeout(G),U(e.target.value),q(e.target.value),u(e.target.value),function(e){L.setAttribute("placeholder",C[e].name),$.setAttribute("placeholder",C[e].city)}(e.target.value)}))}})()})();