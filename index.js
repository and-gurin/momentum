(()=>{"use strict";(()=>{const e=document.querySelector(".settings"),t=document.querySelector(".icon-settings"),n=document.querySelectorAll(".checkbox__input"),o=document.querySelectorAll(".checkbox__label"),a=document.querySelector(".select-group__title-language"),r=document.querySelector(".select-group__title-photo"),c=document.querySelector('option[value="ru"]'),l=document.querySelector('option[value="en"]');let i=!1;const s=e=>{o.forEach((t=>{t.textContent=C[e][`elements-${t.htmlFor}`]})),a.textContent=C[e]["change-lang"],r.textContent=C[e]["change-photo"],c.textContent=C[e].russian,l.textContent=C[e].english},u=document.querySelector(".quote"),d=document.querySelector(".author"),m=document.querySelector(".qoutes-icon");async function g(e){const t=await fetch(M[e]),n=await t.json(),o=Math.floor(15*Math.random()+1);u.textContent=n[o].text,d.textContent=n[o].author,m.addEventListener("click",(()=>g(e)))}const h=document.querySelector(".weather-icon"),y=document.querySelector(".weather__temperature"),p=document.querySelector(".weather__description"),w=document.querySelector(".weater__wind"),f=document.querySelector(".weather__humidity"),v=document.querySelector(".city");async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage.getItem("city")?localStorage.getItem("city"):`${E[e].sity}`;h.className="weather-icon owf";const n=`https://api.openweathermap.org/data/2.5/weather?q=${t}&lang=${e}&appid=f793b145b04b72ffdfd775747be4fac1&units=metric`;try{const t=await fetch(n),o=await t.json();h.classList.add(`owf-${o.weather[0].id}`),y.textContent=`${Math.round(o.main.temp)} °C`,p.textContent=`${o.weather[0].description}`,w.textContent=`${E[e].wind}: ${Math.round(o.wind.speed)} ${E[e].wind_units}`,f.textContent=`${E[e].humidity}: ${o.main.humidity} %`}catch{y.textContent="",w.textContent="",f.textContent="",p.textContent=`${E[e].err}`}}window.addEventListener("beforeunload",(function(){localStorage.setItem("city",v.value)})),v.value=localStorage.getItem("city")?localStorage.getItem("city"):"Minsk",window.addEventListener("load",(function(){localStorage.getItem("city")})),v.addEventListener("change",(e=>{S(A,v.value),localStorage.setItem("city",e.target.value)}));const q=document.querySelector(".name"),L=document.querySelector(".greeting__welcome"),_=document.querySelector(".city");function $(e){L.textContent=function(e){const t=(new Date).getHours();return Math.floor(t/6)<1?`${I[e][0]}`:Math.floor(t/6)<2?`${I[e][1]}`:Math.floor(t/6)<3?`${I[e][2]}`:Math.floor(t/6)<4?`${I[e][3]}`:null}(e),setTimeout($,6e4)}window.addEventListener("beforeunload",(function(){localStorage.setItem("name",q.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(q.value=localStorage.getItem("name"))}));const E={en:{lang:"en",wind:"Wind speed",wind_units:"m/s",humidity:"Humidity",err:"Data loading error",city:"Minsk"},ru:{lang:"ru",wind:"Скорость ветра",wind_units:"м/с",humidity:"Влажность",err:"Ошибка загрузки данных",city:"Минск"}},x={ru:{name:"[Укажите имя]",city:"[Укажите город]"},en:{name:"[Enter name]",city:"[Enter city]"}},C={ru:{"change-lang":"Выбрать язык",russian:"русский",english:"английский","change-photo":"Выбрать фон","change-theme":"Выбрать тему фона",'text-show"':"Показать","elements-date":"дата","elements-time":"время","elements-weather":"погода","elements-greeting":"приветствие","elements-quotes":"цитаты","elements-audio-player":"плеер","elements-todo":"список дел"},en:{"change-lang":"Choose language",russian:"russian",english:"english","change-photo":"Choose Photo Source","change-theme":"Choose Background Theme",'text-show"':"Show","elements-date":"date","elements-time":"time","elements-weather":"weather","elements-greeting":"greeting","elements-quotes":"quotes","elements-audio-player":"audio","elements-todo":"todo"}},k={ru:"ru-RU",en:"en-US"},M={ru:"./quote-ru.json",en:"./quote-en.json"},b=["ru","en"],I={en:["Good night,","Good morning,","Good afternoon,","Good evening,"],ru:["Доброй ночи,","Доброе утро,","Добрый день,","Добрый вечер,"]},T=document.querySelector(".select-group__select-language"),j=localStorage.getItem("language"),A=j&&b.includes(j)?j:b[1];window.addEventListener("beforeunload",localStorage.setItem("language",T.value)),T.value=j||"en",window.addEventListener("load",(()=>j));const D=document.querySelector(".time"),N=document.querySelector(".date");let H;function G(e){const t=(new Date).toLocaleTimeString();D.textContent=t,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";const t=(new Date).toLocaleDateString(k[e],{weekday:"long",day:"numeric",month:"long"});N.textContent=`${t[0].toUpperCase()}${t.split(" ")[0].slice(1)} ${t.split(" ")[1]} ${t.split(" ")[2][0].toUpperCase()+t.split(" ")[2].slice(1)}`}(e),H=setTimeout(G,1e3)}const U=[{title:"Aqua Caelestis",src:"./Aqua-Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"./River-Flows-In-You.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"./Ennio-Morricone.mp3",duration:"01:37"},{title:"Summer Wind",src:"./Summer-Wind.mp3",duration:"01:50"}],F=document.querySelector(".icon_play"),R=document.querySelector(".icon_prew-track"),W=document.querySelector(".icon_next-track"),X=document.querySelector(".audio-player__playlist");let B=!0;const Q=new Audio(U[0].src);let Y=0;U.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,X.append(t)}));const z=document.querySelectorAll(".play-item");function J(){Y<U.length-1?Y++:Y=0,Q.src=U[Y].src,B=!0,P(),console.log(Y)}function O(){Y>0?Y--:Y=U.length-1,Q.src=U[Y].src,B=!0,P(),console.log(Y)}function P(){z.forEach(((e,t)=>{t===Y?e.classList.add("item-active"):e.classList.remove("item-active")})),B?(Q.play(),B=!1,F.classList.add("pause")):(Q.pause(),B=!0,F.classList.remove("pause"))}Q.addEventListener("ended",J);const K=document.querySelector("body"),V=document.querySelector(".icon-slider_prew"),Z=document.querySelector(".icon-slider_next"),ee=document.querySelector(".select-group__select-photo"),te="c8df835955fdffeba282db75503e8f10",ne="n6xOqe2zu-sbnT-6QBrQ2Lf5dJNIavTvLN_doll6D8E";let oe,ae=new Image;async function re(){let e=String(oe).padStart(2,"0"),t=function(){const e=["night","morning","afternoon","evening"],t=(new Date).getHours();return Math.floor(t/6)<1?`${e[0]}`:Math.floor(t/6)<2?`${e[1]}`:Math.floor(t/6)<3?`${e[2]}`:Math.floor(t/6)<4?`${e[3]}`:null}();const n=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=${te}&tags=nature&extras=url_l&format=json&nojsoncallback=1`,o=`https://api.unsplash.com/photos/random?orientation=landscape&query=nature&client_id=${ne}`,a=await fetch(n),r=await a.json(),c=await fetch(o),l=await c.json();ae.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,"unsplash"===ee.value&&(ae.src=await l.urls.regular),"flickr"===ee.value&&(ae.src=await r.photos.photo[oe].url_l),"github"===ee.value&&(ae.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`),ae.onload=()=>{K.style.backgroundImage=`url(${ae.src})`}}oe=Math.floor(20*Math.random()+1),V.addEventListener("click",(function(){oe--,oe<1&&(oe=20),re()})),Z.addEventListener("click",(function(){oe++,oe>20&&(oe=1),re()})),ee.addEventListener("change",re);const ce=document.querySelector("#progress-bar"),le=document.querySelector(".volume-button"),ie=document.querySelector(".volume"),se=document.querySelector(".volume-slider"),ue=document.querySelector(".volume-percentage"),de=document.querySelector(".currentTime"),me=document.querySelector(".durationTime");function ge(){Q.currentTime&&(ce.max=Q.duration,ce.value=Q.currentTime,de.innerHTML=he(Math.floor(Q.currentTime)),me.innerHTML=he(Math.floor(Q.duration)))}function he(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return isNaN(t)&&(t="00"),isNaN(n)&&(n="00"),`${t}:${String(n).padStart(2,"0")}`}function ye(e){Q.currentTime=e.target.value}function pe(e){const t=window.getComputedStyle(se).width,n=e.offsetX/parseInt(t);Q.volume=n,ue.style.width=100*n+"%"}function we(){Q.muted=!Q.muted;const e="icono-volumeMedium",t="icono-volumeMute";Q.muted?(ie.classList.remove(e),ie.classList.add(t)):(ie.classList.add(e),ie.classList.remove(t))}window.onload=function(){window.addEventListener("load",(()=>setSettingsData(A))),F.addEventListener("click",P),W.addEventListener("click",J),R.addEventListener("click",O),setInterval(ge,500),ce.addEventListener("change",ye),se.addEventListener("click",pe,!1),le.addEventListener("click",we),G(A),$(A),g(A),re(),S(A),t.addEventListener("click",(()=>{e.style.transform=i?"translateX(-120%)":"translateX(0)",i=!i})),n.forEach((e=>{e.addEventListener("click",(e=>{const t=document.querySelector(`.${e.target.name}`);e.target.checked?(t.classList.remove("hide"),t.classList.add("show"),localStorage.setItem(e.target.name,"on")):(t.classList.remove("show"),t.classList.add("hide"),localStorage.setItem(e.target.name,"off"))}))})),s(T.value),T.addEventListener("change",(e=>{localStorage.setItem("language",e.target.value),g(e.target.value),$(e.target.value),clearTimeout(H),G(e.target.value),S(e.target.value),s(e.target.value),function(e){q.setAttribute("placeholder",x[e].name),_.setAttribute("placeholder",x[e].city)}(e.target.value)}))}})()})();